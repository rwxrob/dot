#!/usr/bin/env perl
use v5.36;

# TODO check for figl and lolcat deps

my $clear  = "[2J";
my $curoff = "[?25h";
my $curon  = "[?25h";
my $top    = "[H";

my $what = join ' ', @ARGV;

if ( not $what ) {
    print "Text: ";
    $what = <STDIN>;
    chomp $what;
}

sub cleanup {
    print "$curon$clear";
    exit 0;
}

$SIG{'INT'}  = \&cleanup;
$SIG{'TERM'} = \&cleanup;

print $clear;
while (1) {
    print $top.$curoff;
    print `echo "BLAH" | figl | lolcat -f`;
    sleep 2;
}

__END__


lines=$(tput lines)
tmux split-window
tmux resize-pane -y $((lines - 6))
tmux send -t 1 "banner \"$what\"" Enter
sleep 1
tmux send -t 2 "fishies" Enter
